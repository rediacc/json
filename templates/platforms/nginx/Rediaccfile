#!/bin/bash

# === Renet Compose Support ===
_use_renet() {
  [[ -n "$REPOSITORY_NETWORK_ID" ]] && command -v renet &>/dev/null
}
_compose() {
  if _use_renet; then
    renet compose --network-id "$REPOSITORY_NETWORK_ID" -- "$@"
  else
    docker compose "$@"
  fi
}

prep() {
  echo "Pulling Nginx image..."
  docker pull nginx:latest
  return $?
}

up() {
  if [ -f .env ]; then
    source .env
  fi

  echo "Starting Nginx server..."
  _compose up -d
  return $?
}

down() {
  echo "Stopping Nginx server..."
  _compose down -v
  return $?
}
